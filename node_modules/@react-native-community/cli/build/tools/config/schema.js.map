{"version":3,"sources":["../../../src/tools/config/schema.ts"],"names":["map","key","value","t","object","unknown","pattern","command","name","string","required","description","usage","func","options","array","items","parse","default","alternatives","try","bool","number","allow","rename","ignoreUndefined","examples","desc","cmd","healthCheck","label","healthchecks","isRequired","getDiagnostics","win32AutomaticFix","darwinAutomaticFix","linuxAutomaticFix","runAutomaticFix","dependencyConfig","dependency","platforms","any","keys","ios","project","podspecPath","sharedLibraries","libraryFolder","scriptPhases","configurations","android","sourceDir","manifestPath","packageImportPath","packageInstance","dependencyConfiguration","buildTypes","assets","hooks","params","type","message","npmPackageName","optional","projectConfig","linkConfig","commands","healthChecks","dependencies","root","folder","pbxprojPath","podfile","projectPath","projectName","reactNativePath","packageName","packageFolder","mainFilePath","stringsPath","settingsGradlePath","assetsPath","buildGradlePath","appName"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAEA,MAAMA,GAAG,GAAG,CAACC,GAAD,EAA2BC,KAA3B,KACVC,eAAEC,MAAF,GAAWC,OAAX,CAAmB,IAAnB,EAAyBC,OAAzB,CAAiCL,GAAjC,EAAsCC,KAAtC,CADF;AAGA;AACA;AACA;;;AACA,MAAMK,OAAO,GAAGJ,eAAEC,MAAF,CAAS;AACvBI,EAAAA,IAAI,EAAEL,eAAEM,MAAF,GAAWC,QAAX,EADiB;AAEvBC,EAAAA,WAAW,EAAER,eAAEM,MAAF,EAFU;AAGvBG,EAAAA,KAAK,EAAET,eAAEM,MAAF,EAHgB;AAIvBI,EAAAA,IAAI,EAAEV,eAAEU,IAAF,GAASH,QAAT,EAJiB;AAKvBI,EAAAA,OAAO,EAAEX,eAAEY,KAAF,GAAUC,KAAV,CACPb,eACGC,MADH,CACU;AACNI,IAAAA,IAAI,EAAEL,eAAEM,MAAF,GAAWC,QAAX,EADA;AAENC,IAAAA,WAAW,EAAER,eAAEM,MAAF,EAFP;AAGNQ,IAAAA,KAAK,EAAEd,eAAEU,IAAF,EAHD;AAINK,IAAAA,OAAO,EAAEf,eACNgB,YADM,GAENC,GAFM,CAEFjB,eAAEkB,IAAF,EAFE,EAEQlB,eAAEmB,MAAF,EAFR,EAEoBnB,eAAEM,MAAF,GAAWc,KAAX,CAAiB,EAAjB,CAFpB,EAE0CpB,eAAEU,IAAF,EAF1C;AAJH,GADV,EASGW,MATH,CASU,SATV,EASqB,MATrB,EAS6B;AAACC,IAAAA,eAAe,EAAE;AAAlB,GAT7B,CADO,CALc;AAiBvBC,EAAAA,QAAQ,EAAEvB,eAAEY,KAAF,GAAUC,KAAV,CACRb,eAAEC,MAAF,CAAS;AACPuB,IAAAA,IAAI,EAAExB,eAAEM,MAAF,GAAWC,QAAX,EADC;AAEPkB,IAAAA,GAAG,EAAEzB,eAAEM,MAAF,GAAWC,QAAX;AAFE,GAAT,CADQ;AAjBa,CAAT,CAAhB;AAyBA;AACA;AACA;;;AACA,MAAMmB,WAAW,GAAG1B,eAAEC,MAAF,CAAS;AAC3B0B,EAAAA,KAAK,EAAE3B,eAAEM,MAAF,GAAWC,QAAX,EADoB;AAE3BqB,EAAAA,YAAY,EAAE5B,eAAEY,KAAF,GAAUC,KAAV,CACZb,eAAEC,MAAF,CAAS;AACP0B,IAAAA,KAAK,EAAE3B,eAAEM,MAAF,GAAWC,QAAX,EADA;AAEPsB,IAAAA,UAAU,EAAE7B,eAAEkB,IAAF,EAFL;AAGPV,IAAAA,WAAW,EAAER,eAAEM,MAAF,EAHN;AAIPwB,IAAAA,cAAc,EAAE9B,eAAEU,IAAF,EAJT;AAKPqB,IAAAA,iBAAiB,EAAE/B,eAAEU,IAAF,EALZ;AAMPsB,IAAAA,kBAAkB,EAAEhC,eAAEU,IAAF,EANb;AAOPuB,IAAAA,iBAAiB,EAAEjC,eAAEU,IAAF,EAPZ;AAQPwB,IAAAA,eAAe,EAAElC,eAAEU,IAAF,GAASH,QAAT;AARV,GAAT,CADY;AAFa,CAAT,CAApB;AAgBA;AACA;AACA;;;AACO,MAAM4B,gBAAgB,GAAGnC,eAC7BC,MAD6B,CACtB;AACNmC,EAAAA,UAAU,EAAEpC,eACTC,MADS,CACF;AACNoC,IAAAA,SAAS,EAAExC,GAAG,CAACG,eAAEM,MAAF,EAAD,EAAaN,eAAEsC,GAAF,EAAb,CAAH,CACRC,IADQ,CACH;AACJC,MAAAA,GAAG,EAAExC,eACFC,MADE,CACK;AACNwC,QAAAA,OAAO,EAAEzC,eAAEM,MAAF,EADH;AAENoC,QAAAA,WAAW,EAAE1C,eAAEM,MAAF,EAFP;AAGNqC,QAAAA,eAAe,EAAE3C,eAAEY,KAAF,GAAUC,KAAV,CAAgBb,eAAEM,MAAF,EAAhB,CAHX;AAINsC,QAAAA,aAAa,EAAE5C,eAAEM,MAAF,EAJT;AAKNuC,QAAAA,YAAY,EAAE7C,eAAEY,KAAF,GAAUC,KAAV,CAAgBb,eAAEC,MAAF,EAAhB,CALR;AAMN6C,QAAAA,cAAc,EAAE9C,eAAEY,KAAF,GAAUC,KAAV,CAAgBb,eAAEM,MAAF,EAAhB,EAA4BS,OAA5B,CAAoC,EAApC;AANV,OADL,EASFA,OATE,CASM,EATN,CADD;AAWJgC,MAAAA,OAAO,EAAE/C,eACNC,MADM,CACC;AACN+C,QAAAA,SAAS,EAAEhD,eAAEM,MAAF,EADL;AAEN2C,QAAAA,YAAY,EAAEjD,eAAEM,MAAF,EAFR;AAGN4C,QAAAA,iBAAiB,EAAElD,eAAEM,MAAF,EAHb;AAIN6C,QAAAA,eAAe,EAAEnD,eAAEM,MAAF,EAJX;AAKN8C,QAAAA,uBAAuB,EAAEpD,eAAEM,MAAF,EALnB;AAMN+C,QAAAA,UAAU,EAAErD,eAAEY,KAAF,GAAUC,KAAV,CAAgBb,eAAEM,MAAF,EAAhB,EAA4BS,OAA5B,CAAoC,EAApC;AANN,OADD,EASNA,OATM,CASE,EATF;AAXL,KADG,EAuBRA,OAvBQ,EADL;AAyBNuC,IAAAA,MAAM,EAAEtD,eAAEY,KAAF,GAAUC,KAAV,CAAgBb,eAAEM,MAAF,EAAhB,EAA4BS,OAA5B,CAAoC,EAApC,CAzBF;AA0BNwC,IAAAA,KAAK,EAAE1D,GAAG,CAACG,eAAEM,MAAF,EAAD,EAAaN,eAAEM,MAAF,EAAb,CAAH,CAA4BS,OAA5B,CAAoC,EAApC,CA1BD;AA2BNyC,IAAAA,MAAM,EAAExD,eACLY,KADK,GAELC,KAFK,CAGJb,eAAEC,MAAF,CAAS;AACPI,MAAAA,IAAI,EAAEL,eAAEM,MAAF,EADC;AAEPmD,MAAAA,IAAI,EAAEzD,eAAEM,MAAF,EAFC;AAGPoD,MAAAA,OAAO,EAAE1D,eAAEM,MAAF;AAHF,KAAT,CAHI,EASLS,OATK,CASG,EATH;AA3BF,GADE,EAuCTA,OAvCS,EADN;AAyCNsB,EAAAA,SAAS,EAAExC,GAAG,CACZG,eAAEM,MAAF,EADY,EAEZN,eAAEC,MAAF,CAAS;AACP0D,IAAAA,cAAc,EAAE3D,eAAEM,MAAF,GAAWsD,QAAX,EADT;AAEPzB,IAAAA,gBAAgB,EAAEnC,eAAEU,IAAF,EAFX;AAGPmD,IAAAA,aAAa,EAAE7D,eAAEU,IAAF,EAHR;AAIPoD,IAAAA,UAAU,EAAE9D,eAAEU,IAAF;AAJL,GAAT,CAFY,CAAH,CAQTK,OARS,CAQD,EARC,CAzCL;AAkDNgD,EAAAA,QAAQ,EAAE/D,eAAEY,KAAF,GAAUC,KAAV,CAAgBT,OAAhB,EAAyBW,OAAzB,CAAiC,EAAjC,CAlDJ;AAmDNiD,EAAAA,YAAY,EAAEhE,eAAEY,KAAF,GAAUC,KAAV,CAAgBa,WAAhB,EAA6BX,OAA7B,CAAqC,EAArC;AAnDR,CADsB,EAsD7Bb,OAtD6B,CAsDrB,IAtDqB,EAuD7Ba,OAvD6B,EAAzB;AAyDP;AACA;AACA;;;;;AACO,MAAM8C,aAAa,GAAG7D,eAC1BC,MAD0B,CACnB;AACNgE,EAAAA,YAAY,EAAEpE,GAAG,CACfG,eAAEM,MAAF,EADe,EAEfN,eACGC,MADH,CACU;AACNiE,IAAAA,IAAI,EAAElE,eAAEM,MAAF,EADA;AAEN+B,IAAAA,SAAS,EAAExC,GAAG,CAACG,eAAEM,MAAF,EAAD,EAAaN,eAAEsC,GAAF,EAAb,CAAH,CAAyBC,IAAzB,CAA8B;AACvCC,MAAAA,GAAG,EAAExC,eACFC,MADE,CACK;AACN+C,QAAAA,SAAS,EAAEhD,eAAEM,MAAF,EADL;AAEN6D,QAAAA,MAAM,EAAEnE,eAAEM,MAAF,EAFF;AAGN8D,QAAAA,WAAW,EAAEpE,eAAEM,MAAF,EAHP;AAIN+D,QAAAA,OAAO,EAAErE,eAAEM,MAAF,EAJH;AAKNoC,QAAAA,WAAW,EAAE1C,eAAEM,MAAF,EALP;AAMNgE,QAAAA,WAAW,EAAEtE,eAAEM,MAAF,EANP;AAONiE,QAAAA,WAAW,EAAEvE,eAAEM,MAAF,EAPP;AAQNsC,QAAAA,aAAa,EAAE5C,eAAEM,MAAF,EART;AASNqC,QAAAA,eAAe,EAAE3C,eAAEY,KAAF,GAAUC,KAAV,CAAgBb,eAAEM,MAAF,EAAhB,CATX;AAUNwC,QAAAA,cAAc,EAAE9C,eAAEY,KAAF,GAAUC,KAAV,CAAgBb,eAAEM,MAAF,EAAhB,EAA4BS,OAA5B,CAAoC,EAApC;AAVV,OADL,EAaFK,KAbE,CAaI,IAbJ,CADkC;AAevC2B,MAAAA,OAAO,EAAE/C,eACNC,MADM,CACC;AACN+C,QAAAA,SAAS,EAAEhD,eAAEM,MAAF,EADL;AAEN6D,QAAAA,MAAM,EAAEnE,eAAEM,MAAF,EAFF;AAGN4C,QAAAA,iBAAiB,EAAElD,eAAEM,MAAF,EAHb;AAIN6C,QAAAA,eAAe,EAAEnD,eAAEM,MAAF,EAJX;AAKN8C,QAAAA,uBAAuB,EAAEpD,eAAEM,MAAF,EALnB;AAMN+C,QAAAA,UAAU,EAAErD,eAAEY,KAAF,GAAUC,KAAV,CAAgBb,eAAEM,MAAF,EAAhB,EAA4BS,OAA5B,CAAoC,EAApC;AANN,OADD,EASNK,KATM,CASA,IATA;AAf8B,KAA9B,CAFL;AA4BNkC,IAAAA,MAAM,EAAEtD,eAAEY,KAAF,GAAUC,KAAV,CAAgBb,eAAEM,MAAF,EAAhB,CA5BF;AA6BNiD,IAAAA,KAAK,EAAE1D,GAAG,CAACG,eAAEM,MAAF,EAAD,EAAaN,eAAEM,MAAF,EAAb,CA7BJ;AA8BNkD,IAAAA,MAAM,EAAExD,eAAEY,KAAF,GAAUC,KAAV,CACNb,eAAEC,MAAF,CAAS;AACPI,MAAAA,IAAI,EAAEL,eAAEM,MAAF,EADC;AAEPmD,MAAAA,IAAI,EAAEzD,eAAEM,MAAF,EAFC;AAGPoD,MAAAA,OAAO,EAAE1D,eAAEM,MAAF;AAHF,KAAT,CADM;AA9BF,GADV,EAuCGc,KAvCH,CAuCS,IAvCT,CAFe,CAAH,CA0CZL,OA1CY,CA0CJ,EA1CI,CADR;AA4CNyD,EAAAA,eAAe,EAAExE,eAAEM,MAAF,EA5CX;AA6CNmC,EAAAA,OAAO,EAAE5C,GAAG,CAACG,eAAEM,MAAF,EAAD,EAAaN,eAAEsC,GAAF,EAAb,CAAH,CACNC,IADM,CACD;AACJC,IAAAA,GAAG,EAAExC,eACFC,MADE,CACK;AACNwC,MAAAA,OAAO,EAAEzC,eAAEM,MAAF,EADH;AAENqC,MAAAA,eAAe,EAAE3C,eAAEY,KAAF,GAAUC,KAAV,CAAgBb,eAAEM,MAAF,EAAhB,CAFX;AAGNsC,MAAAA,aAAa,EAAE5C,eAAEM,MAAF;AAHT,KADL,EAMFS,OANE,CAMM,EANN,CADD;AAQJgC,IAAAA,OAAO,EAAE/C,eACNC,MADM,CACC;AACN+C,MAAAA,SAAS,EAAEhD,eAAEM,MAAF,EADL;AAEN2C,MAAAA,YAAY,EAAEjD,eAAEM,MAAF,EAFR;AAGNmE,MAAAA,WAAW,EAAEzE,eAAEM,MAAF,EAHP;AAINoE,MAAAA,aAAa,EAAE1E,eAAEM,MAAF,EAJT;AAKNqE,MAAAA,YAAY,EAAE3E,eAAEM,MAAF,EALR;AAMNsE,MAAAA,WAAW,EAAE5E,eAAEM,MAAF,EANP;AAONuE,MAAAA,kBAAkB,EAAE7E,eAAEM,MAAF,EAPd;AAQNwE,MAAAA,UAAU,EAAE9E,eAAEM,MAAF,EARN;AASNyE,MAAAA,eAAe,EAAE/E,eAAEM,MAAF,EATX;AAUN0E,MAAAA,OAAO,EAAEhF,eAAEM,MAAF,EAVH;AAWN8C,MAAAA,uBAAuB,EAAEpD,eAAEM,MAAF;AAXnB,KADD,EAcNS,OAdM,CAcE,EAdF;AARL,GADC,EAyBNA,OAzBM,EA7CH;AAuENuC,EAAAA,MAAM,EAAEtD,eAAEY,KAAF,GAAUC,KAAV,CAAgBb,eAAEM,MAAF,EAAhB,EAA4BS,OAA5B,CAAoC,EAApC,CAvEF;AAwENgD,EAAAA,QAAQ,EAAE/D,eAAEY,KAAF,GAAUC,KAAV,CAAgBT,OAAhB,EAAyBW,OAAzB,CAAiC,EAAjC,CAxEJ;AAyENsB,EAAAA,SAAS,EAAExC,GAAG,CACZG,eAAEM,MAAF,EADY,EAEZN,eAAEC,MAAF,CAAS;AACP0D,IAAAA,cAAc,EAAE3D,eAAEM,MAAF,GAAWsD,QAAX,EADT;AAEPzB,IAAAA,gBAAgB,EAAEnC,eAAEU,IAAF,EAFX;AAGPmD,IAAAA,aAAa,EAAE7D,eAAEU,IAAF,EAHR;AAIPoD,IAAAA,UAAU,EAAE9D,eAAEU,IAAF;AAJL,GAAT,CAFY,CAAH,CAQTK,OARS,CAQD,EARC;AAzEL,CADmB,EAoF1Bb,OApF0B,CAoFlB,IApFkB,EAqF1Ba,OArF0B,EAAtB","sourcesContent":["import t, {SchemaLike} from 'joi';\n\nconst map = (key: RegExp | SchemaLike, value: SchemaLike) =>\n  t.object().unknown(true).pattern(key, value);\n\n/**\n * Schema for CommandT\n */\nconst command = t.object({\n  name: t.string().required(),\n  description: t.string(),\n  usage: t.string(),\n  func: t.func().required(),\n  options: t.array().items(\n    t\n      .object({\n        name: t.string().required(),\n        description: t.string(),\n        parse: t.func(),\n        default: t\n          .alternatives()\n          .try(t.bool(), t.number(), t.string().allow(''), t.func()),\n      })\n      .rename('command', 'name', {ignoreUndefined: true}),\n  ),\n  examples: t.array().items(\n    t.object({\n      desc: t.string().required(),\n      cmd: t.string().required(),\n    }),\n  ),\n});\n\n/**\n * Schema for HealthChecksT\n */\nconst healthCheck = t.object({\n  label: t.string().required(),\n  healthchecks: t.array().items(\n    t.object({\n      label: t.string().required(),\n      isRequired: t.bool(),\n      description: t.string(),\n      getDiagnostics: t.func(),\n      win32AutomaticFix: t.func(),\n      darwinAutomaticFix: t.func(),\n      linuxAutomaticFix: t.func(),\n      runAutomaticFix: t.func().required(),\n    }),\n  ),\n});\n\n/**\n * Schema for UserDependencyConfigT\n */\nexport const dependencyConfig = t\n  .object({\n    dependency: t\n      .object({\n        platforms: map(t.string(), t.any())\n          .keys({\n            ios: t\n              .object({\n                project: t.string(),\n                podspecPath: t.string(),\n                sharedLibraries: t.array().items(t.string()),\n                libraryFolder: t.string(),\n                scriptPhases: t.array().items(t.object()),\n                configurations: t.array().items(t.string()).default([]),\n              })\n              .default({}),\n            android: t\n              .object({\n                sourceDir: t.string(),\n                manifestPath: t.string(),\n                packageImportPath: t.string(),\n                packageInstance: t.string(),\n                dependencyConfiguration: t.string(),\n                buildTypes: t.array().items(t.string()).default([]),\n              })\n              .default({}),\n          })\n          .default(),\n        assets: t.array().items(t.string()).default([]),\n        hooks: map(t.string(), t.string()).default({}),\n        params: t\n          .array()\n          .items(\n            t.object({\n              name: t.string(),\n              type: t.string(),\n              message: t.string(),\n            }),\n          )\n          .default([]),\n      })\n      .default(),\n    platforms: map(\n      t.string(),\n      t.object({\n        npmPackageName: t.string().optional(),\n        dependencyConfig: t.func(),\n        projectConfig: t.func(),\n        linkConfig: t.func(),\n      }),\n    ).default({}),\n    commands: t.array().items(command).default([]),\n    healthChecks: t.array().items(healthCheck).default([]),\n  })\n  .unknown(true)\n  .default();\n\n/**\n * Schema for ProjectConfigT\n */\nexport const projectConfig = t\n  .object({\n    dependencies: map(\n      t.string(),\n      t\n        .object({\n          root: t.string(),\n          platforms: map(t.string(), t.any()).keys({\n            ios: t\n              .object({\n                sourceDir: t.string(),\n                folder: t.string(),\n                pbxprojPath: t.string(),\n                podfile: t.string(),\n                podspecPath: t.string(),\n                projectPath: t.string(),\n                projectName: t.string(),\n                libraryFolder: t.string(),\n                sharedLibraries: t.array().items(t.string()),\n                configurations: t.array().items(t.string()).default([]),\n              })\n              .allow(null),\n            android: t\n              .object({\n                sourceDir: t.string(),\n                folder: t.string(),\n                packageImportPath: t.string(),\n                packageInstance: t.string(),\n                dependencyConfiguration: t.string(),\n                buildTypes: t.array().items(t.string()).default([]),\n              })\n              .allow(null),\n          }),\n          assets: t.array().items(t.string()),\n          hooks: map(t.string(), t.string()),\n          params: t.array().items(\n            t.object({\n              name: t.string(),\n              type: t.string(),\n              message: t.string(),\n            }),\n          ),\n        })\n        .allow(null),\n    ).default({}),\n    reactNativePath: t.string(),\n    project: map(t.string(), t.any())\n      .keys({\n        ios: t\n          .object({\n            project: t.string(),\n            sharedLibraries: t.array().items(t.string()),\n            libraryFolder: t.string(),\n          })\n          .default({}),\n        android: t\n          .object({\n            sourceDir: t.string(),\n            manifestPath: t.string(),\n            packageName: t.string(),\n            packageFolder: t.string(),\n            mainFilePath: t.string(),\n            stringsPath: t.string(),\n            settingsGradlePath: t.string(),\n            assetsPath: t.string(),\n            buildGradlePath: t.string(),\n            appName: t.string(),\n            dependencyConfiguration: t.string(),\n          })\n          .default({}),\n      })\n      .default(),\n    assets: t.array().items(t.string()).default([]),\n    commands: t.array().items(command).default([]),\n    platforms: map(\n      t.string(),\n      t.object({\n        npmPackageName: t.string().optional(),\n        dependencyConfig: t.func(),\n        projectConfig: t.func(),\n        linkConfig: t.func(),\n      }),\n    ).default({}),\n  })\n  .unknown(true)\n  .default();\n"]}